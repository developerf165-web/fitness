# üêõ –•–ê–¢–û–ì–ò–ò BACKEND: Undefined array key "cover_img"

## üìã –•—É–ª–æ—Å–∞

–°–µ—Ä–≤–µ—Ä —Ö–∞—Ç–æ–≥–∏–∏ **500 Internal Server Error** –±–∞—Ä–º–µ–≥–∞—Ä–¥–æ–Ω–∞–¥ “≥–∞–Ω–≥–æ–º–∏ —ç“∑–æ–¥–∏ —Ç—Ä–µ–Ω–µ—Ä, —á—É–Ω–∫–∏ –¥–∞—Ä `CoachController.php` (—Å–∞—Ç—Ä–∏ 26) –º–∞–π–¥–æ–Ω–∏ `cover_img` –±–∏–¥—É–Ω–∏ —Å–∞–Ω“∑–∏—à –∏—Å—Ç–∏—Ñ–æ–¥–∞ —à—É–¥–∞–∞—Å—Ç.

---

## ‚ùå –•–∞—Ç–æ–≥–∏–∏ –º—É—Ñ–∞—Å—Å–∞–ª

```
–•–∞—Ç–æ–≥”£: "Undefined array key \"cover_img\""
–§–∞–π–ª: /var/www/fitness-new/app/Http/Controllers/CoachController.php
–°–∞—Ç—Ä: 26
```

### üìç –ú—É—à–∫–∏–ª–æ—Ç

Backend –¥–∞—Ä —Å–∞—Ç—Ä–∏ 26 –º—É—Å—Ç–∞“õ–∏–º–∞–Ω –±–∞ `$request['cover_img']` –¥–∞—Å—Ç—Ä–∞—Å”£ –º–µ–∫—É–Ω–∞–¥ **–±–∏–¥—É–Ω–∏ —Å–∞–Ω“∑–∏—à** –æ—ë –∏–Ω –º–∞–π–¥–æ–Ω –≤—É“∑—É–¥ –¥–æ—Ä–∞–¥ —ë –Ω–µ.

–í–∞“õ—Ç–µ –∫–∏ –∫–æ—Ä–±–∞—Ä `cover_img` (—Ä–∞—Å–º“≥–æ–∏ —Ñ–æ–Ω”£) –±–æ—Ä –Ω–∞–º–µ–∫—É–Ω–∞–¥, —Å–µ—Ä–≤–µ—Ä 500 error –º–µ–¥–∏“≥–∞–¥ –±–∞ “∑–æ–∏ –æ–Ω –∫–∏ –±–∏–¥—É–Ω–∏ –æ–Ω –∫–æ—Ä –∫—É–Ω–∞–¥.

---

## ‚úÖ “≤–∞–ª–ª–∏ –¥—É—Ä—É—Å—Ç –¥–∞—Ä Backend

### –í–∞—Ä–∏–∞–Ω—Ç 1: –°–∞–Ω“∑–∏—à –±–æ `isset()`

```php
// CoachController.php - –°–∞—Ç—Ä–∏ 26

// ‚ùå –ù–û–î–£–†–£–°–¢ (–º—É—à–∫–∏–ª–æ—Ç):
$coverImages = $request['cover_img'];

// ‚úÖ –î–£–†–£–°–¢:
$coverImages = isset($request['cover_img']) ? $request['cover_img'] : [];

// –Å –±–æ PHP 7.4+ null coalescing:
$coverImages = $request['cover_img'] ?? [];
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å—Ç–∏—Ñ–æ–¥–∞–∏ –º–µ—Ç–æ–¥–∏ Laravel

```php
// –ë–µ“≥—Ç–∞—Ä–∏–Ω —Ä–æ“≥ - –∏—Å—Ç–∏—Ñ–æ–¥–∞–∏ –º–µ—Ç–æ–¥–∏ Laravel:
$coverImages = $request->input('cover_img', []); // Default: []

// –Å –∞–≥–∞—Ä —Ñ–∞–π–ª –∞—Å—Ç:
$coverImages = $request->file('cover_img') ?? [];
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –í–∞–ª–∏–¥–∞—Ç—Å–∏—è

```php
// –î–∞—Ä –∞–≤–≤–∞–ª–∏ –º–µ—Ç–æ–¥–∏ create():
$validated = $request->validate([
    'name' => 'required|string|max:255',
    'surname' => 'required|string|max:255',
    'phone' => 'required|string',
    'avatar' => 'required|file|image',
    'work_experience' => 'required|integer',
    'color' => 'required|string',
    'direction_id' => 'required|array',
    'cover_img' => 'nullable|array', // ‚Üê NULLABLE!
    'cover_img.*' => 'file|image',
]);

// –ü–∞—Å $validated['cover_img'] –∞–ª–ª–∞–∫–∞–π null —ë array –º–µ—à–∞–≤–∞–¥
$coverImages = $validated['cover_img'] ?? [];
```

---

## üì§ –ú–∞—ä–ª—É–º–æ—Ç–∏ –∏—Ä—Å–æ–ª—à—É–¥–∞ –∞–∑ Frontend

Frontend **–¥—É—Ä—É—Å—Ç** –º–∞–π–¥–æ–Ω—Ä–æ –º–µ—Ñ–∏—Ä–∏—Å—Ç–∞–¥ (“≥–∞—Ç—Ç–æ –∞–≥–∞—Ä —Ö–æ–ª”£ –±–æ—à–∞–¥):

```json
{
  "name": "–æ—Ä–ø–∞",
  "surname": "–ª–æ—Ä–ø–∞–ø",
  "phone": "86556",
  "direction_id[0]": "1",
  "work_experience": "3",
  "color": "#f97316",
  "status": "1",
  "grade": "5",
  "avatar": "[FILE: photo.jpg, 76405 bytes]",
  "cover_img": ""  // ‚Üê –•–æ–ª”£, –∞–º–º–æ –º–∞–≤“∑—É–¥
}
```

–ê–º–º–æ Laravel –≤–∞“õ—Ç–µ –∫–∏ `cover_img` —Ö–æ–ª”£ –∞—Å—Ç, –æ–Ω—Ä–æ –∞–∑ `$request` –º–µ–±–∞—Ä–æ—Ä–∞–¥, –≤–∞ –¥–∞—Å—Ç—Ä–∞—Å–∏–∏ –º—É—Å—Ç–∞“õ–∏–º `$request['cover_img']` error –º–µ–¥–∏“≥–∞–¥.

---

## üîß –¢–∞–≤—Å–∏—è

1. **–§–∞–≤—Ä”£ “≥–∞–ª:** –°–∞–Ω“∑–∏—à–∏ `isset()` —ë `$request->input()` –∏—Å—Ç–∏—Ñ–æ–¥–∞ –±–∞—Ä–µ–¥
2. **“≤–∞–ª–ª–∏ –¥–∞–≤–æ–º–Ω–æ–∫:** –í–∞–ª–∏–¥–∞—Ç—Å–∏—è–∏ –¥—É—Ä—É—Å—Ç –±–æ `nullable` –∏–ª–æ–≤–∞ –∫—É–Ω–µ–¥
3. **–ë–∞—Ä–æ–∏ –æ—è–Ω–¥–∞:** “≤–∞–º–∞–∏ –¥–∞—Å—Ç—Ä–∞—Å–∏“≥–æ –±–∞ –º–∞—Å—Å–∏–≤“≥–æ–∏ request –±–æ—è–¥ —Å–∞–Ω“∑–∏–¥–∞ —à–∞–≤–∞–Ω–¥

---

## üìä Stack Trace (–∫”Ø—Ç–æ“≥—à—É–¥–∞)

```
ErrorException: Undefined array key "cover_img"
  at CoachController.php:26
  ‚Üí CoachController->create()
  ‚Üí Router->dispatch()
  ‚Üí Kernel->handle()
```

–¢–∞–º–æ–º–∏ stack trace –¥–∞—Ä –ª–æ–≥-“≥–æ–∏ –ø–∞–π–≤–∞—Å—Ç—à—É–¥–∞ –º–∞–≤“∑—É–¥ –∞—Å—Ç.

---

## üéØ –ù–∞—Ç–∏“∑–∞

- **–ú—É—à–∫–∏–ª–æ—Ç:** Backend –∫–æ–¥–∏ —Å–∞–Ω“∑–∏—à–Ω–∞—à—É–¥–∞ –¥–æ—Ä–∞–¥
- **“≤–∞–ª:** –ú–∞–π–¥–æ–Ω–∏ `cover_img`-—Ä–æ –±–æ `nullable` —ë default `[]` –∫–æ—Ä–∫–∞—Ä–¥ –∫—É–Ω–µ–¥
- **Frontend:** “≤–∞–º–∞—Ä–æ –¥—É—Ä—É—Å—Ç –º–µ—Ñ–∏—Ä–∏—Å—Ç–∞–¥, –º—É—à–∫–∏–ª–æ—Ç 100% –¥–∞—Ä backend

---

## üìé –ó–∞–º–∏–º–∞“≥–æ

1. **API Logs:** `api-logs-2025-12-02.json` (–ø–∞–π–≤–∞—Å—Ç)
2. **Stack Trace:** –î–∞—Ä –±–æ–ª–æ –Ω–∏—à–æ–Ω –¥–æ–¥–∞ —à—É–¥
3. **Frontend –∫–æ–¥:** –î—É—Ä—É—Å—Ç —Ç–∞–Ω–∑–∏–º—à—É–¥–∞ –≤–∞ —Å–∞–±—Ç –º–µ–∫—É–Ω–∞–¥

---

**–°–∞–Ω–∞–∏ —Ä–µ–ø–æ—Ä—Ç:** 2025-12-02  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ HIGH  
**–°—Ç–∞—Ç—É—Å:** ‚è≥ –ò–Ω—Ç–∏–∑–æ—Ä–∏ –∏—Å–ª–æ“≥–æ—Ç–∏ backend

---

## üí° P.S.

–ò–Ω –Ω–∞–≤—ä–∏ —Ö–∞—Ç–æ–≥–∏“≥–æ –º–∞—ä–º—É–ª”£ “≥–∞—Å—Ç–∞–Ω–¥ –≤–∞“õ—Ç–µ –∫–∏ –º–∞–π–¥–æ–Ω“≥–æ–∏ –æ–ø—Å–∏–æ–Ω–∞–ª”£ –±–∏–¥—É–Ω–∏ —Å–∞–Ω“∑–∏—à –∏—Å—Ç–∏—Ñ–æ–¥–∞ –º–µ—à–∞–≤–∞–Ω–¥. 

**–ú–∞—Å—ä–∞–ª–∞:** Laravel –≤–∞“õ—Ç–µ –∫–∏ `cover_img=""` (—Ö–æ–ª”£) –º–µ—Ñ–∏—Ä–∏—Å—Ç–µ–¥, –æ–Ω—Ä–æ –∞–∑ –º–∞—Å—Å–∏–≤–∏ request –º–µ–±–∞—Ä–æ—Ä–∞–¥, –Ω–∞ –∫–∏ `null` –º–µ–≥—É–∑–æ—Ä–∞–¥.

**“≤–∞–ª:** “≤–∞–º–µ—à–∞ `$request->input('key', default)` —ë `$request['key'] ?? default` –∏—Å—Ç–∏—Ñ–æ–¥–∞ –±–∞—Ä–µ–¥!
